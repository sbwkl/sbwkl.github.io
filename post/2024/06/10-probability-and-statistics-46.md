# 《概率统计》 day 46

今天是读《概率统计》的逻辑第 46 天，学习列联表（ Contingency Tables）名字意义不明，但见到实例就熟悉了。

||稀疏|茂密|总计|
|--|--|--|--|
|程序员|12|28|40|
|产品经理|8|52|60|
|总计|20|80|100|

这个表就叫列联表，每格的概率 $p_{ij}$ 每行的概率 $p_{i+}$ 每列的概率 $p_{+j}$。

假设这份数据来自随机选择的 100 人，分别对职业和发量计数，现在判断职业和发量之间是否独立，即

$$
H_0: p_{ij} = p_{i+}p_{+j}
$$

和上一节类似，统计

$$
Q = \sum_{i=1}^R \sum_{j=1}^C \frac{(N_{ij} - \hat{E_{ij}})^2}{\hat{E_{ij}}}
$$

当 n -> ∞ 是自由度 (R - 1)(C - 1) 的 $\chi^2$ 分布

$$
\hat{E_{ij}} = np_{ij}=np_{i+}p_{+j} = \frac{N_{i+}N_{+j}}{n}
$$

上表 R = 2，C = 2 每格对应的 $\hat{E_{ij}}$

||稀疏|茂密|
|--|--|--|
|程序员|8|32|
|产品经理|12|48|

$$
\begin{aligned}
q &= \frac{(12 - 8)^2}{8} + \frac{(28-32)^2}{32} \\
&+ \frac{(8 - 12)^2}{12} + \frac{(52 - 48)^2}{48} \\
&= 25/6
\end{aligned}
$$

自由度 1，$P(Q \ge 25/6) = 0.0412$，p 值只有 0.04 多点，显著性等级 $\alpha_0$ 选 0.05

$\delta$：如果 Q ≥ 3.84 拒绝 $H_0$，工伤实锤了。

（暴击 +5）

上面这个例子还有另一种采样方法：随机选 40 名程序员和 60 名产品经理，分组计数，不再测试是否独立，而是测试这两种职业是否具有相同的分布，叫做 Tests of Homogeneity。

用的同一个统计 Q，有点玩文字游戏的感觉。

有些场景不能简单用这种方法，比如一项关于常备灭火器的调研：

随机选 100 人，27 人觉得应该常备，然后对这 100 人进行一次消防培训，人数提升到 35 人，可能会认为列联表长这样

||常备|不需要|总计|
|--|--|--|--|
|培训前|27|73|100|
|培训后|35|65|100|
|总计|62|138|200|

更加合理的列联表

||常备（后）|不需要（后）|总计|
|--|--|--|--|
|常备（前）|?|?|27|
|不需要（前）|?|?|73|
|总计|35|65|100|

正确绘制列联表才是难点。

**碎碎念**

最近看完《黑客与画家》作者对 Lisp 语言特别推崇，就查了一些它的资料。这是一门相当古老的语言，括号特别多，语法奇特。最吸引我的是它自带生成代码的特性，作为一名 CRUD boy、CV warrior，这特性可太有用了，有空学一学，说不定有什么启发。

封面图：Twitter 心臓弱眞君 @xinzoruo