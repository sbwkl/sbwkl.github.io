# 《概率统计》 day 46

今天是读《概率统计》的逻辑第 46 天，学习列联表（ Contingency Tables），名字不明所以，但见到实例就熟悉了。

||稀疏|茂密|总计|
|--|--|--|--|
|程序员|12|28|40|
|其他职业|8|52|60|
|总计|20|80|100|

这个表就叫列联表，每格的概率 $p_{ij}$，每行的概率 $p_{i+}$，每列的概率 $p_{+j}$。

假设这是一份程序员发量研究数据，现在需要判断职业和发量之间是否独立，即

$$
H_0: p_{ij} = p_{i+}p_{+j}
$$

统计

$$
Q = \sum_{i=1}^R \sum_{j=1}^C \frac{(N_{ij} - \hat{E_{ij}})^2}{\hat{E_{ij}}}
$$

当 n -> ∞ 是自由度 (R - 1)(C - 1) 的 $\chi^2$ 分布

$$
\hat{E_{ij}} = np_{ij}=np_{i+}p_{+j} = \frac{N_{i+}N_{+j}}{n}
$$

上表 R = 2，C = 2，每格对应的 $\hat{E_{ij}}$

||稀疏|茂密|
|--|--|--|
|程序员|8|32|
|其他职业|12|48|

$$
\begin{aligned}
q &= \frac{(12 - 8)^2}{8} + \frac{(28-32)^2}{32} \\
&+ \frac{(8 - 12)^2}{12} + \frac{(52 - 48)^2}{48} \\
&= 25/6
\end{aligned}
$$

自由度 1，$P(Q \ge 25/6) = 0.0412$

上面这份报告来自随机选 100 人，然后分别统计职业和发量，

还有另一种方法，随机框定 40 个程序员和 60 个其他职业，分别统计发量。

$H_0$ 调整为程序员和其他职业拥有相同的分布

这种情况用的是同一个统计 Q。

采样的方法不一样，假设也不一样，不过总感觉是一回事。

但是有种情况不适用这种方法，那就是发生了明显有关联的事。

比如这样一个场景

随机选 100 人，有 27 人觉得家里应该常备灭火器，然后对这 100 人进行一次消防培训，这下有 35 人。

||常备灭火器|不需要|
|--|--|--|
|培训前|27|73|
|培训后|35|65|

这个表是不合适的

||常备（后）|不需要（后）|
|--|--|--|
|常备（前）|
|不需要（前）|

**碎碎念**

最近看完《黑客与画家》作者对 Lisp 语言特别推崇，就查了一些它的资料，这是一门相当古老的语言，括号特别多，而且只有表达式。最吸引我的是它自带生成代码的特性，作为一名 CRUD boy、CV warrior，代码生成代码的特性可太有用了。

封面图：Twitter 心臓弱眞君 @xinzoruo