# 银行系统如何实现转账

*注意：下面内容仅用于理解，我不是从业人员，不知道银行具体怎么弄*

同行转账，假设场景：Alice 转￥10 给 Bob。

这种情况很容易，两人都在银行有账户，只要分别对两人的账户才做即可，顺便保证下原子性。

1. Alice    -10
2. Bob      +10

交易过程大概是这样

![](https://gendal.files.wordpress.com/2013/11/single-bank-settlement.png)

跨行转账，假设场景：Alice 转￥10 给 Charlie 但 Alice 在巴克莱银行，Charlie 在汇丰银行。

巴克莱可以操作 Alice 的账户，但是要怎么说服汇丰给 Charlie 的账户 +10。

有一种办法是汇丰作为客户在巴克莱开设账户 HSBC，这时候流程变成

1. Alice -10
2. HSBC +10
3. 巴克莱通知汇丰给 Charlie +10
4. 汇丰收到消息，知道自己的账户 +10
5. Charlie +10

交易过程变成了这样

![](https://gendal.files.wordpress.com/2013/11/correspondent-banking.png)

这种方式叫做代理银行业务 (correspondent banking)。

+ 银行之间需要互相开户才行，不然的话可能要借助其他银行当跳板绕一圈。
+ 占用一部分资金，而且实时结算成本也不小。

占用资金的问题可以这么解决。大体上，两家银行的客户互相转账的总量应该是差不多的，那么就可以跟踪每笔交易，然后结算一段时间内交易产生总额，这样就衍生出 deferred net settlement 系统，这极大提高了效率，降低成本。

交易过程变成这样

![](https://gendal.files.wordpress.com/2013/11/deferred-net-settlement.png)

这种方式可能引入新问题：因为结算是延迟的，用户申请转账，但是资金可能还没到银行，这时候银行有两个选择。

1. 等资金到了在完成业务，这样做引入延迟。
2. 承担风险直接完成业务，这样做万一对方公司破产了，需要逆转这笔交易，丧失结算最终性(settlement finality)。

那有没有办法保证交易即具有实时性又具有结算最终性，哪怕银行破产？

有，回到最开头，只要所有银行在一家不会破产的银行开户即可，也就是中央银行。

这是全额支付系统（Real-Time Gross Settlement）的灵感来源。

交易过程变成这样

![](https://gendal.files.wordpress.com/2013/11/rtgs.png)


之前一直有听说虚拟货币（比特币等）可以解决信任问题，一直不理解，也没想过一个转账能这么复杂。我以前还喷跨行转账咋还要手续费，穷疯了吧，现在想想，是我唐突了。

虚拟货币和 RTGS 系统有点像，实时、结算、最终性，最牛逼的是不需要中央银行这样的机构。

看完文章后我又看了下复式记账法，因为我搞不清 debit 和 credit。

以存款为例，假设 Alice 存了￥10。那么从 Alice 的视角从现金账户 -10 然后借记卡账户 +10 账本应该是这样的。

|账户|Debits (Dr) | Credits (Cr)|
|--|:--:|:--:|
|现金||10|
|Alice|10||

但是银行视角是这样的

|账户|Debits (Dr) | Credits (Cr)|
|--|:--:|:--:|
|现金|10||
|Alice||10|

银行会把这 10 块放到现金账户里，同时产生一笔 10 元的负债。银行视角，我们存钱其实就是贷款给银行，银行同时得到了现金和负债，然后把现金再通过贷款给别人。

信用卡就是银行借钱给我们，往信用卡里充过量的钱，余额会变成负数，第一次看到的时候吓一跳。

考虑到风险原因，拿到的现金不能全贷出去，需要留一部分作为准备金，假设比例是 30% 那么收到 10 块可以贷 7 块。

贷款出去的 7 块如果兜兜转转又存到银行，那么银行又会得到相等的现金和负债，这次能贷 4.9 出去，因吹斯艇。

之前支付宝好像玩类似的玩法，它比较激进，留的「准备金」有点少。

**[准备金](https://baike.baidu.com/item/%E5%87%86%E5%A4%87%E9%87%91/1993377)**

>准备金（reserve）是商业银行库存的现金按比例存放在中央银行的存款。实行准备金的目的是确保商业银行在遇到突然大量提取银行存款时，能有相当充足的清偿能力。自20世纪30年代以后，法定准备金制度还成为国家调节经济的重要手段，是中央银行对商业银行的信贷规模进行控制的一种制度。中央银行控制的商业银行的准备金的多少和准备率的高低影响着银行的信贷规模。这个制度规定，商业银行不能将吸收的存款全部贷放出去，必须按一定的比例，或以存款形式存放在中央银行，或以库存现金形式自己保持。准备金占存款总额的比重，称为准备率。

有时候新闻说降准，降的就是这个东西，降准了就能释放更多的资金，促进经济。
