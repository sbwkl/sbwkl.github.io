# 《概率统计》 day 8

今天是读《概率统计》的逻辑第 8 天，学习赌徒破产问题（Gambler's Ruin Problem）。

它描述一个游戏，每局有概率赢一块钱，也有概率输一块钱，计算玩到对面破产的概率。

结论是这个概率和三个因素有关，本金 i，每局概率 p 和对手本金 k - i

p = 0.5 赢的概率

$$
P(W) = \frac{i}{k}
$$

p ≠ 0.5 赢的概率

$$
P(W) = \frac{(\frac{1-p}{p})^i - 1}{(\frac{1-p}{p})^{k} - 1}
$$

下面这个表计算本金 i = 9 在不同概率，赢到不同 k 的概率

|k |p=0.49|p=0.5|p=0.51|p=0.55|
|--|--    |--   |--    |--    |
|10|0.8810|0.1  |0.9170|0.9655|
|18|0.4109|0.5  |0.5891|0.8589|
|50|0.0678|0.18 |0.3497|0.8357|

从这个表看，就算是公平的游戏，土豪玩家概率上碾压平民玩家。

暴富从概率上是很低的，如果不小心遇到了，别留恋，赶紧跑。

提高每局游戏的胜率，0.01 的提升让到达 50 的概率上升近一倍。

想到几句话，本金很重要，本金决定赚多少，凭运气赚来的钱，早晚凭实力亏回去。

前段时间正好看到池老师的分享，差不多也是这个意思

> 我在星球里常常讲的一个做选择的依据，就是大概率成功的选择方法。

> 选择工作，也是类似的道理。每次一职业经历的变化应该是下一份选择的基石，一步一个台阶，最终形成累积效应，做成事的概率就会越来越大。

这个游戏和马尔科夫链有点像，把本金 i 看做一个状态，那么它有 p 概率前进到 i + 1 状态，或者 1 - p 概率后退到 i - 1 状态，到达 0 或 k 游戏结束。

最后附上解题过程，核心是一个递归等式

$$
a_i = pa_{i + 1} + (1 - p)a_{i - 1}
$$

a<sub>i</sub> 表示本金 i 赢到对面破产的概率，a<sub>0</sub> = 0，a<sub>k</sub> = 1。

这个等式通过边缘概率计算公式推导，事件 A<sub>i</sub>，B<sub>i</sub> 分别表示本金 i 时赢下/输掉一局，他们构成样本空间的 patition

$$
P(W) = P(A_i)P(W|A_i) + P(B_i)P(W|B_i)
$$

P(W) 表示本金 i 赢到对面破产的概率，也就是 a<sub>i</sub> ，P(W|A<sub>i</sub>) 表示赢下这局后，赢到对面破产的概率，也就是 a<sub>i+1</sub>，另一个同理。

1 到 k 的等式列出来整理后得到

$$
\begin{aligned}
a_2 - a_1 &= \frac{1-p}{p}a_1 \\
a_3 - a_2 &= \frac{1-p}{p}(a_2 - a_1) = (\frac{1-p}{p})^2a_1 \\
a_4 - a_3 &= \frac{1-p}{p}(a_3 - a_2) = (\frac{1-p}{p})^3a_1 \\
... \\
a_{k-1} - a_{k-2} &=\frac{1-p}{p}(a_{k-2} - a_{k-3}) = (\frac{1-p}{p})^{k-2}a_1 \\
a_k - a_{k-1} &= \frac{1-p}{p}(a_{k-1} - a_{k-2})=(\frac{1-p}{p})^{k-1}a_1
\end{aligned}
$$

等式两边累加得到

$$
1 - a_1 = a_1 \sum_{i=1}^{k-1}(\frac{1-p}{p})^i
$$

等式右边是等比数列求和，解出 a<sub>1</sub> 后依次解出 a<sub>i</sub>，话说居然有这么巧合的事，右边刚好是个等比数列。

封面图：Twitter 心臓弱眞君 @xinzoruo