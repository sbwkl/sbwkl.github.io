# 《概率统计》 day 8

今天是读《概率统计》的逻辑第 8 天，学习赌徒破产问题（Gambler's Ruin Problem）。

它描述一个游戏，每局有概率赢一块钱，也有概率输一块钱，计算玩到对面破产的概率。

光听这个描述第一反应算期望，假设概率是 p 那么 E = 2p - 1，理论上只要 p > 0.5 这游戏能玩。

直接说结论，本金是 i 一直赢到 k 的概率

p = 0.5 赢的概率

$$
P(W) = \frac{i}{k}
$$

p ≠ 0.5 赢的概率

$$
P(W) = \frac{(\frac{1-p}{p})^i - 1}{(\frac{1-p}{p})^{k} - 1}
$$

下面这个表计算本金 i = 9 在不同概率，赢到不同 k 的概率

|k |p=0.5 |p=0.49|p=0.51|p=0.55|
|--|--    |--    |--    |--    |
|10|0.1   |0.8810|0.9170|0.9655|
|18|0.5   |0.4109|0.5895|0.8589|
|50|0.18  |0.0678|0.3497|0.8357|

从这个表看，哪怕是公平的游戏，大资金玩家概率上碾压小资金玩家。

想到几句话，本金很重要的，本金决定赚多少，凭运气赚来的钱，早晚凭实力亏回去。

这个游戏和马尔科夫链有点像，把本金 i 看做一个状态，那么它有 p 概率前进到 i + 1 状态，或者 1 - p 概率后退到 i - 1 状态，前进到 k 状态就赢了，后退到 0 状态就破产了。

这里面最重要的因素是 p，其次是 i，如果我上面算的没错，p 只要稍微大一点点，对最后赢下 k 的影响也很大。

前段时间正好看到池老师的分享

> 我在星球里常常讲的一个做选择的依据，就是大概率成功的选择方法。

> 选择工作，也是类似的道理。每次一职业经历的变化应该是下一份选择的基石，一步一个台阶，最终形成累积效应，做成事的概率就会越来越大。



<!-- 不知道大家有没有玩过一个很古早的游戏《神仙道》，当时还蛮火的，里面有个猎命系统，和这个很像。 -->



最后附上解题过程，最重要的等式

$$
a_i = pa_{i + 1} + (1 - p)a_{i - 1}
$$

通过

$$
P(W) = P(A_i)P(W|A_i) + P(B_i)P(W|B_i)
$$

得到，P(W) 表示本金 i 赢钱的概率。

a<sub>i</sub> 表示本金为 i 赢下比赛的概率，p 表示每一局游戏，获胜的概率，其中 a<sub>0</sub> = 0，a<sub>k</sub> = 1。


根据描述梳理两个事件

+ A<sub>i</sub>：本金 i 时赢下一块钱
+ B<sub>i</sub>：本金 i 时输掉一块钱

A 和 B 构成样本空间的 patition


这个等式整理下

$$
\begin{aligned}
a_2 - a_1 &= \frac{1-p}{p}a_1 \\
a_3 - a_2 &= \frac{1-p}{p}(a_2 - a_1) = (\frac{1-p}{p})^2a_1 \\
a_4 - a_3 &= \frac{1-p}{p}(a_3 - a_2) = (\frac{1-p}{p})^3a_1 \\
... \\
a_{k-1} - a_{k-2} &=\frac{1-p}{p}(a_{k-2} - a_{k-3}) = (\frac{1-p}{p})^{k-1}a_1 \\
a_k - a_{k-1} &= \frac{1-p}{p}(a_{k-1} - a_{k-2})=(\frac{1-p}{p})^{k-1}a_1
\end{aligned}
$$

等式两边累加得到

$$
1 - a_1 = a_1 \sum_{i=1}^{k-1}(\frac{1-p}{p})^i
$$

等式右边是等比数列求和，解出 a<sub>1</sub> 带入最初的等式依次解出 a<sub>i</sub>


封面图：Twitter 心臓弱眞君 @xinzoruo


B 站有句话怎么说来着，我可以失误无数次，你只能失误一次。


